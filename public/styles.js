"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[869],{516:()=>{},775:(e,t,s)=>{s.d(t,{A:()=>w});var a=s(456),o={class:"container py-8"},n={class:"card-list",id:"chat-list"},r=["href","onClick"],i={class:"card-body"},l={class:"row gx-5"},c={class:"col-auto"},d=["src"],v={class:"col"},h={class:"d-flex align-items-center mb-3"},u={class:"me-auto mb-0"},p={class:"text-muted extra-small ms-2"},m={class:"d-flex align-items-center"},g={class:"line-clamp me-auto"},k={key:0,class:"badge badge-circle bg-primary ms-5"};const f={data:function(){return{}},methods:{setConversation:function(e){this.$root.conversation=e,this.$root.markAsRead(e)}},mounted:function(){var e=this;fetch("/api/conversations").then((function(e){return e.json()})).then((function(t){for(var s in t.data)t.data[s].participants[0].isOnline=!1;e.$root.conversations=t.data}))}};const w=(0,s(262).A)(f,[["render",function(e,t,s,f,w,x){return(0,a.uX)(),(0,a.CE)("div",o,[t[0]||(t[0]=(0,a.Fv)('<div class="mb-8"><h2 class="fw-bold m-0">Chats</h2></div><div class="mb-6"><form action="#"><div class="input-group"><div class="input-group-text"><div class="icon icon-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg></div></div><input type="text" class="form-control form-control-lg ps-0" placeholder="Search messages or users" aria-label="Search for messages or users..."></div></form></div>',2)),(0,a.Lk)("div",n,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.$root.conversations,(function(t){return(0,a.uX)(),(0,a.CE)("a",{key:t.id,href:"#"+t.id,onClick:(0,a.D$)((function(e){return x.setConversation(t)}),["prevent"]),class:"card border-0 text-reset"},[(0,a.Lk)("div",i,[(0,a.Lk)("div",l,[(0,a.Lk)("div",c,[(0,a.Lk)("div",{class:(0,a.C4)(["avatar",{"avatar-online":t.participants[0].isOnline}])},[(0,a.Lk)("img",{src:t.participants[0].avatar_url},null,8,d)],2)]),(0,a.Lk)("div",v,[(0,a.Lk)("div",h,[(0,a.Lk)("h5",u,(0,a.v_)(t.participants[0].name),1),(0,a.Lk)("span",p,(0,a.v_)(e.$root.moment(t.last_message.created_at).fromNow()),1)]),(0,a.Lk)("div",m,[(0,a.Lk)("div",g,(0,a.v_)("attachment"==t.last_message.type?t.last_message.body.file_name:t.last_message.body),1),t.new_messages?((0,a.uX)(),(0,a.CE)("div",k,[(0,a.Lk)("span",null,(0,a.v_)(t.new_messages),1)])):(0,a.Q3)("",!0)])])])])],8,r)})),128))])])}]])},430:(e,t,s)=>{s.d(t,{A:()=>ce});var a=s(456),o={class:"main is-visible","data-dropzone-area":""},n={class:"container h-100"},r={key:0,class:"d-flex flex-column h-100 justify-content-center text-center"},i={key:1,class:"d-flex flex-column h-100 position-relative"};var l={class:"chat-header border-bottom py-4 py-lg-7"},c={class:"row align-items-center"},d={class:"col-8 col-xl-12"},v={class:"row align-items-center text-center text-xl-start"},h={class:"col-12 col-xl-6"},u={class:"row align-items-center gx-5"},p={class:"col-auto"},m={class:"avatar avatar-online d-none d-xl-inline-block"},g=["src"],k={class:"col overflow-hidden"},f={class:"text-truncate",id:"chat-name"},w={key:0,class:"text-truncate"};const x={props:["conversation"]};var y=s(262);var L={class:"chat-body hide-scrollbar flex-1 h-100"},b={class:"chat-body-inner"},C={class:"py-6 py-lg-12",id:"chat-body"},_={href:"#","data-bs-toggle":"modal","data-bs-target":"#modal-profile",class:"avatar avatar-responsive"},$=["src"],j={class:"message-inner"},F={class:"message-body"},E={class:"message-content"},X={key:0,class:"message-text"},B={key:1,class:"message-gallery"},M={class:"row gx-3"},T={class:"col"},z=["src"],A={key:2,class:"message-text"},H={class:"row align-items-center gx-4"},D={class:"col-auto"},Q=["href"],S={class:"col overflow-hidden"},V={class:"text-truncate text-reset"},I={href:"#",class:"text-reset"},q={class:"list-inline text-uppercase extra-small opacity-75 mb-0"},K={class:"list-inline-item"},N={class:"message-action"},O={class:"dropdown"},R={class:"dropdown-menu"},P={class:"dropdown-item d-flex align-items-center text-danger",href:"#"},J=["onClick"],U={class:"dropdown-item d-flex align-items-center text-danger",href:"#"},W=["onClick"],G={class:"message-footer"},Y={class:"extra-small text-muted"};const Z={props:["conversation"],data:function(){return{fetched:0}},mounted:function(){var e=this;this.conversation&&fetch("/api/conversations/".concat(this.conversation.id,"/messages")).then((function(e){return e.json()})).then((function(t){e.$root.messages=t.messages.data.reverse();var s=document.querySelector("#chat-body");s.scrollTop=s.scrollHeight}))},updated:function(){var e=this;this.conversation&&this.fetched!=this.conversation.id&&fetch("/api/conversations/".concat(this.conversation.id,"/messages")).then((function(e){return e.json()})).then((function(t){e.$root.messages=t.messages.data.reverse(),e.fetched=e.conversation.id;var s=document.querySelector("#chat-body");s.scrollTop=s.scrollHeight}))}};var ee={class:"chat-footer pb-3 pb-lg-7 position-absolute bottom-0 start-0"},te=["value"],se=["value"],ae={class:"row align-items-center gx-0"},oe={class:"col-auto"},ne={class:"col"},re={class:"input-group"};const ie={props:["conversation"],data:function(){return{message:"",attachment:"",start_typing:!1,timeout:null}},methods:{startTyping:function(){var e=this;this.start_typing||(this.start_typing=!0,this.$root.chatChannel.whisper("typing",{id:this.$root.userId,conversation_id:this.$root.conversation.id})),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.start_typing=!1,e.$root.chatChannel.whisper("stopped-typing",{id:e.$root.userId,conversation_id:e.$root.conversation.id})}),1e3)},sendMessage:function(){var e=this,t=(this.$root.conversation.id,this.message,this.$root.csrfToken,new FormData);t.append("conversation_id",this.$root.conversation.id),t.append("message",this.message),t.append("_token",this.$root.csrfToken),this.attachment&&t.append("attachment",this.attachment),fetch("/api/messages",{method:"POST",headers:{Accpet:"application/json"},body:t}).then((function(e){return e.json()})).then((function(t){e.$root.messages.push(t);var s=document.querySelector("#chat-body");s.scrollTop=s.scrollHeight})),this.message="",this.attachment=null},selectFile:function(){var e=this,t=document.createElement("input");t.setAttribute("type","file"),t.addEventListener("change",(function(){0!=t.files.length&&(e.attachment=t.files[0],e.sendMessage())})),t.click()}}},le={components:{ChatHeader:(0,y.A)(x,[["render",function(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("div",c,[t[2]||(t[2]=(0,a.Lk)("div",{class:"col-2 d-xl-none"},[(0,a.Lk)("a",{class:"icon icon-lg text-muted",href:"#","data-toggle-chat":""},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-left"},[(0,a.Lk)("polyline",{points:"15 18 9 12 15 6"})])])],-1)),(0,a.Lk)("div",d,[(0,a.Lk)("div",v,[(0,a.Lk)("div",h,[(0,a.Lk)("div",u,[(0,a.Lk)("div",p,[(0,a.Lk)("div",m,[(0,a.Lk)("img",{class:"avatar-img",id:"chat-avatar",src:s.conversation.participants[0].avatar_url,alt:""},null,8,g)])]),(0,a.Lk)("div",k,[(0,a.Lk)("h5",f,(0,a.v_)(s.conversation.participants[0].name),1),s.conversation.participants[0].isTyping?((0,a.uX)(),(0,a.CE)("p",w,t[0]||(t[0]=[(0,a.eW)("is typing"),(0,a.Lk)("span",{class:"typing-dots"},[(0,a.Lk)("span",null,"."),(0,a.Lk)("span",null,"."),(0,a.Lk)("span",null,".")],-1)]))):(0,a.Q3)("",!0)])])]),t[1]||(t[1]=(0,a.Fv)('<div class="col-xl-6 d-none d-xl-block"><div class="row align-items-center justify-content-end gx-6"><div class="col-auto"><a href="#" class="icon icon-lg text-muted" data-bs-toggle="offcanvas" data-bs-target="#offcanvas-more" aria-controls="offcanvas-more"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal"><circle cx="12" cy="12" r="1"></circle><circle cx="19" cy="12" r="1"></circle><circle cx="5" cy="12" r="1"></circle></svg></a></div><div class="col-auto"><div class="avatar-group"><a href="#" class="avatar avatar-sm" data-bs-toggle="modal" data-bs-target="#modal-user-profile"><img class="avatar-img" src="assets/img/avatars/2.jpg" alt="#"></a><a href="#" class="avatar avatar-sm" data-bs-toggle="modal" data-bs-target="#modal-profile"><img class="avatar-img" src="assets/img/avatars/1.jpg" alt="#"></a></div></div></div></div>',1))])]),t[3]||(t[3]=(0,a.Fv)('<div class="col-2 d-xl-none text-end"><a href="#" class="icon icon-lg text-muted" data-bs-toggle="offcanvas" data-bs-target="#offcanvas-more" aria-controls="offcanvas-more"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg></a></div>',1))])])}]]),ChatContent:(0,y.A)(Z,[["render",function(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("div",L,[(0,a.Lk)("div",b,[(0,a.Lk)("div",C,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.$root.messages,(function(s){return(0,a.uX)(),(0,a.CE)("div",{key:s.id,class:(0,a.C4)(["message",{"message-out":s.user_id==e.$root.userId}])},[(0,a.Lk)("a",_,[(0,a.Lk)("img",{class:"avatar-img",src:s.user.avatar_url,alt:""},null,8,$)]),(0,a.Lk)("div",j,[(0,a.Lk)("div",F,[(0,a.Lk)("div",E,["text"==s.type?((0,a.uX)(),(0,a.CE)("div",X,[(0,a.Lk)("p",null,(0,a.v_)(s.body),1)])):(0,a.Q3)("",!0),"attachment"==s.type&&s.body.mimetype.match(/image\/.+/)?((0,a.uX)(),(0,a.CE)("div",B,[(0,a.Lk)("div",M,[(0,a.Lk)("div",T,[(0,a.Lk)("img",{class:"img-fluid rounded",src:"/storage/"+s.body.file_path,"data-action":"zoom",alt:""},null,8,z)])])])):(0,a.Q3)("",!0),"attachment"!=s.type||s.body.mimetype.match(/image\/.+/)?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",A,[(0,a.Lk)("div",H,[(0,a.Lk)("div",D,[(0,a.Lk)("a",{href:"/storage/"+s.body.file_path,class:"avatar avatar-sm"},t[0]||(t[0]=[(0,a.Lk)("div",{class:"avatar-text bg-white text-primary"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-down"},[(0,a.Lk)("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),(0,a.Lk)("polyline",{points:"19 12 12 19 5 12"})])],-1)]),8,Q)]),(0,a.Lk)("div",S,[(0,a.Lk)("h6",V,[(0,a.Lk)("a",I,(0,a.v_)(s.body.file_name),1)]),(0,a.Lk)("ul",q,[(0,a.Lk)("li",K,(0,a.v_)(Number(s.body.file_size/1024).toFixed(2))+" KB",1)])])])])),(0,a.Lk)("div",N,[(0,a.Lk)("div",O,[t[4]||(t[4]=(0,a.Lk)("a",{class:"icon text-muted",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"},[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-vertical"},[(0,a.Lk)("circle",{cx:"12",cy:"12",r:"1"}),(0,a.Lk)("circle",{cx:"12",cy:"5",r:"1"}),(0,a.Lk)("circle",{cx:"12",cy:"19",r:"1"})])],-1)),(0,a.Lk)("ul",R,[t[3]||(t[3]=(0,a.Fv)('<li><a class="dropdown-item d-flex align-items-center" href="#"><span class="me-auto">Edit</span><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-3"><path d="M12 20h9"></path><path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path></svg></div></a></li><li><a class="dropdown-item d-flex align-items-center" href="#"><span class="me-auto">Reply</span><div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-corner-up-left"><polyline points="9 14 4 9 9 4"></polyline><path d="M20 20v-7a4 4 0 0 0-4-4H4"></path></svg></div></a></li><li><hr class="dropdown-divider"></li>',3)),(0,a.Lk)("li",null,[(0,a.Lk)("a",P,[(0,a.Lk)("span",{class:"me-auto",onClick:(0,a.D$)((function(t){return e.$root.deleteMessage(s,"me")}),["prevent"])},"Delete for me",8,J),t[1]||(t[1]=(0,a.Fv)('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></div>',1))])]),(0,a.Lk)("li",null,[(0,a.Lk)("a",U,[(0,a.Lk)("span",{class:"me-auto",onClick:(0,a.D$)((function(t){return e.$root.deleteMessage(s,"all")}),["prevent"])},"Delete For everyone",8,W),t[2]||(t[2]=(0,a.Fv)('<div class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></div>',1))])])])])])])]),(0,a.Lk)("div",G,[(0,a.Lk)("span",Y,(0,a.v_)(e.$root.moment(s.created_at).fromNow()),1)])])],2)})),128))])])])}]]),ChatFooter:(0,y.A)(ie,[["render",function(e,t,s,o,n,r){return(0,a.uX)(),(0,a.CE)("div",ee,[t[8]||(t[8]=(0,a.Lk)("div",{class:"dz-preview bg-dark",id:"dz-preview-row","data-horizontal-scroll":""},null,-1)),(0,a.Lk)("form",{class:"chat-form rounded-pill bg-dark","data-emoji-form":"",method:"post",action:"/api/messages",onSubmit:t[4]||(t[4]=(0,a.D$)((function(e){return r.sendMessage()}),["prevent"]))},[(0,a.Lk)("input",{type:"hidden",name:"_token",value:e.$root.csrfToken},null,8,te),(0,a.Lk)("input",{type:"hidden",name:"conversation_id",value:s.conversation?s.conversation.id:0},null,8,se),(0,a.Lk)("div",ae,[(0,a.Lk)("div",oe,[(0,a.Lk)("a",{href:"#",onClick:t[0]||(t[0]=(0,a.D$)((function(e){return r.selectFile()}),["prevent"])),class:"btn btn-icon btn-link text-body rounded-circle",id:"dz-btn"},t[5]||(t[5]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-paperclip"},[(0,a.Lk)("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})],-1)]))]),(0,a.Lk)("div",ne,[(0,a.Lk)("div",re,[(0,a.bo)((0,a.Lk)("textarea",{name:"message","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.message=e}),onFocus:t[2]||(t[2]=function(t){return e.$root.markAsRead()}),onKeypress:t[3]||(t[3]=function(e){return r.startTyping()}),class:"form-control px-0",placeholder:"Type your message...",rows:"1","data-emoji-input":"","data-autosize":"true"},null,544),[[a.Jo,n.message]]),t[6]||(t[6]=(0,a.Fv)('<a href="#" class="input-group-text text-body pe-0" data-emoji-btn=""><span class="icon icon-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-smile"><circle cx="12" cy="12" r="10"></circle><path d="M8 14s1.5 2 4 2 4-2 4-2"></path><line x1="9" y1="9" x2="9.01" y2="9"></line><line x1="15" y1="9" x2="15.01" y2="9"></line></svg></span></a>',1))])]),t[7]||(t[7]=(0,a.Fv)('<div class="col-auto"><button class="btn btn-icon btn-primary rounded-circle ms-5"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-send"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg></button></div>',1))])],32)])}]])},props:["conversation"],date:function(){return{messages:[]}}},ce=(0,y.A)(le,[["render",function(e,t,s,l,c,d){var v=(0,a.g2)("ChatHeader"),h=(0,a.g2)("ChatContent"),u=(0,a.g2)("ChatFooter");return(0,a.uX)(),(0,a.CE)("main",o,[(0,a.Lk)("div",n,[e.$root.conversation?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",r,t[0]||(t[0]=[(0,a.Fv)('<div class="mb-6"><span class="icon icon-xl text-muted"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-message-square"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></span></div><p class="text-muted">Pick a person from left menu, <br> and start your conversation.</p>',2)]))),e.$root.conversation?((0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(v,{conversation:s.conversation},null,8,["conversation"]),(0,a.bF)(h,{conversation:s.conversation},null,8,["conversation"]),(0,a.bF)(u,{conversation:s.conversation},null,8,["conversation"])])):(0,a.Q3)("",!0)])])}]])}}]);